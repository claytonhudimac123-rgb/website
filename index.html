<!DOCTYPE html>
<html>
<head>
    <title>Standard Library AI Interface</title>
    <style>
        body { font-family: sans-serif; padding: 20px; }
        #output { border: 1px solid #ccc; padding: 15px; min-height: 50px; white-space: pre-wrap; background-color: #f4f4f4; }
        textarea { width: 80%; height: 100px; padding: 10px; margin-bottom: 10px; }
        button { padding: 10px 20px; cursor: pointer; }
    </style>
</head>
<body>
    <h1>Standard Library AI Chat</h1>

    <textarea id="user-input" placeholder="Ask the AI a question..."></textarea><br>
    <button id="submit-btn">Send Query to Backend</button>

    <h2>AI Response:</h2>
    <div id="output">...</div>

    <script>
        document.getElementById('submit-btn').addEventListener('click', async () => {
            const prompt = document.getElementById('user-input').value;
            const outputDiv = document.getElementById('output');
            
            if (!prompt) {
                outputDiv.textContent = 'Please enter a prompt.';
                return;
            }

            outputDiv.textContent = 'Thinking...';
            
            try {
                // The frontend makes a request to your custom Python backend
                const response = await fetch('/api/ai', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    // Send user input as JSON
                    body: JSON.stringify({ prompt: prompt })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }

                const result = await response.json();
                
                if (result.response) {
                    outputDiv.textContent = result.response;
                } else if (result.error) {
                    outputDiv.textContent = 'Backend Error: ' + result.error;
                }
                
            } catch (error) {
                console.error('Fetch error:', error);
                outputDiv.textContent = 'Failed to connect to the backend server.';
            }
        });
    </script>
</body>
</html>
